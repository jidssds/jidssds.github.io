!function(){class CursorBuddy{constructor(o={}){if(o.element instanceof HTMLElement)this.el=o.element;else if("string"==typeof o.image)this.el=document.createElement("img"),this.el.src=o.image,this.el.alt=o.alt??"Cursor companion",this.el.className="cursor-companion",document.body.appendChild(this.el);else{this.el=document.createElement("div"),this.el.className="cursor-companion-default",Object.assign(this.el.style,{width:"30px",height:"30px",borderRadius:"50%",background:"rgba(0,150,255,.6)",position:"absolute",pointerEvents:"none",transform:"translate(0px,0px)",transition:"transform 0.1s linear"}),document.body.appendChild(this.el)}this.followSpeed=o.followSpeed??.15,this.offset=o.offset??{x:0,y:0},this.hoverEffects=this._n(o.hoverEffects,{type:"bounce",intensity:1.1,duration:180}),this.clickEffects=this._n(o.clickEffects,{type:"squash",intensity:.85,duration:150}),this.idleEffects=this._n(o.idleEffects,{type:"float",intensity:5,duration:2e3}),this.position={x:0,y:0},this.target={x:0,y:0},this._running=!1,this._idleOffset=0,this._m=this._m.bind(this),this._h=this._h.bind(this),this._c=this._c.bind(this),this._a=this._a.bind(this)}_n(e,t){return e?true===e?{...t}:"object"==typeof e?{type:e.type??t.type,intensity:e.intensity??t.intensity,duration:e.duration??t.duration}:null:null}_m(e){this.target.x=e.clientX+this.offset.x,this.target.y=e.clientY+this.offset.y}_h(){this._r(this.hoverEffects)}_c(){this._r(this.clickEffects)}_r(e){if(!e)return;const t=this.el,{type:o,intensity:i,duration:n}=e;switch(o){case"bounce":t.style.transition=`transform ${n}ms ease-out`,t.style.transform=`translate(${this.position.x}px,${this.position.y}px) scale(${i})`,setTimeout(()=>t.style.transform=`translate(${this.position.x}px,${this.position.y}px) scale(1)`,n);break;case"squash":t.style.transition=`transform ${n}ms ease-out`,t.style.transform=`translate(${this.position.x}px,${this.position.y}px) scale(${i},${2-i})`,setTimeout(()=>t.style.transform=`translate(${this.position.x}px,${this.position.y}px) scale(1,1)`,n);break;case"spin":t.style.transition=`transform ${n}ms ease-out`,t.style.transform=`translate(${this.position.x}px,${this.position.y}px) rotate(360deg)`,setTimeout(()=>t.style.transform=`translate(${this.position.x}px,${this.position.y}px) rotate(0deg)`,n);break;case"wiggle":t.style.transition=`transform ${n}ms ease-out`,t.style.transform=`translate(${this.position.x}px,${this.position.y}px) rotate(${10*i}deg)`,setTimeout(()=>t.style.transform=`translate(${this.position.x}px,${this.position.y}px) rotate(${-10*i}deg)`,n),setTimeout(()=>t.style.transform=`translate(${this.position.x}px,${this.position.y}px) rotate(0deg)`,2*n);break;case"float":break;default:break}}_a(){if(!this._running)return;this.position.x+=(this.target.x-this.position.x)*this.followSpeed,this.position.y+=(this.target.y-this.position.y)*this.followSpeed;let e=0;if(this.idleEffects){this._idleOffset+=.05,e=Math.sin(this._idleOffset)*this.idleEffects.intensity}this.el.style.transform=`translate(${this.position.x}px,${this.position.y+e}px)`,requestAnimationFrame(this._a)}start(){if(this._running)return;this._running=!0,document.addEventListener("mousemove",this._m),this.el.addEventListener("mouseenter",this._h),this.el.addEventListener("click",this._c),requestAnimationFrame(this._a)}stop(){this._running=!1,document.removeEventListener("mousemove",this._m),this.el.removeEventListener("mouseenter",this._h),this.el.removeEventListener("click",this._c)}}let c=[];function init(){window.CursorCompanion={add(o){const t=new CursorBuddy(o);return t.start(),c.push(t),t},remove(o){const t=c.indexOf(o);t>-1&&(c[t].stop(),c.splice(t,1))},removeAll(){c.forEach(e=>e.stop()),c.length=0},pauseAll(){c.forEach(e=>e.stop())},resumeAll(){c.forEach(e=>e.start())},list(){return c.slice()}}}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",init):init()}();
