(function(){class e{constructor(t={}){if(t.element instanceof HTMLElement)this.el=t.element;else if("string"==typeof t.image)this.el=document.createElement("img"),this.el.src=t.image,this.el.alt=t.alt??"Cursor companion",this.el.className="cursor-companion",document.body.appendChild(this.el);else{this.el=document.createElement("div"),this.el.className="cursor-companion-default",this.el.style.width="30px",this.el.style.height="30px",this.el.style.borderRadius="50%",this.el.style.background="rgba(0,150,255,0.6)",this.el.style.position="absolute",this.el.style.pointerEvents="none",document.body.appendChild(this.el)}this.followSpeed=t.followSpeed??.15,this.offset=t.offset??{x:0,y:0},this.hoverEffects=this.#n(t.hoverEffects,{defaultType:"bounce",defaultIntensity:1.1,defaultDuration:180}),this.clickEffects=this.#n(t.clickEffects,{defaultType:"squash",defaultIntensity:.85,defaultDuration:150}),this.idleEffects=this.#n(t.idleEffects,{defaultType:"float",defaultIntensity:5,defaultDuration:2e3}),this.position={x:0,y:0},this.target={x:0,y:0},this._running=!1,this._idleOffset=0,this._onMouseMove=this.#m.bind(this),this._onMouseEnter=this.#h.bind(this),this._onClick=this.#c.bind(this)}#n(t,e){return t?true===t?{...e}:"object"==typeof t?{type:t.type??e.defaultType,intensity:t.intensity??e.defaultIntensity,duration:t.duration??e.defaultDuration}:null:null}#m(t){this.target.x=t.clientX+this.offset.x,this.target.y=t.clientY+this.offset.y}#h(){this.hoverEffects&&this.#r(this.hoverEffects)}#c(){this.clickEffects&&this.#r(this.clickEffects)}#r(t){if(!t)return;const e=this.el,n=t.type,o=t.intensity,i=t.duration;switch(n){case"bounce":e.style.transition=`transform ${i}ms ease-out`,e.style.transform=`scale(${o})`,setTimeout(()=>e.style.transform="scale(1)",i);break;case"squash":e.style.transition=`transform ${i}ms ease-out`,e.style.transform=`scale(${o},${2-o})`,setTimeout(()=>e.style.transform="scale(1,1)",i);break;case"spin":e.style.transition=`transform ${i}ms ease-out`,e.style.transform="rotate(360deg)",setTimeout(()=>e.style.transform="rotate(0deg)",i);break;case"wiggle":e.style.transition=`transform ${i}ms ease-out`,e.style.transform=`rotate(${10*o}deg)`,setTimeout(()=>e.style.transform=`rotate(${-10*o}deg)`,i),setTimeout(()=>e.style.transform="rotate(0deg)",2*i);break;case"float":break;default:break}}start(){if(this._running)return;this._running=!0,document.addEventListener("mousemove",this._onMouseMove),this.el.addEventListener("mouseenter",this._onMouseEnter),this.el.addEventListener("click",this._onClick),requestAnimationFrame(this.#a.bind(this))}#a(){if(!this._running)return;this.position.x+=(this.target.x-this.position.x)*this.followSpeed,this.position.y+=(this.target.y-this.position.y)*this.followSpeed,this.idleEffects?(this._idleOffset+=.05;const t=Math.sin(this._idleOffset)*this.idleEffects.intensity;this.el.style.transform=`translate(${this.position.x}px,${this.position.y+t}px)`):this.el.style.transform=`translate(${this.position.x}px,${this.position.y}px)`,requestAnimationFrame(this.#a.bind(this))}stop(){this._running=!1,document.removeEventListener("mousemove",this._onMouseMove),this.el.removeEventListener("mouseenter",this._onMouseEnter),this.el.removeEventListener("click",this._onClick)}}let t=[];function n(){window.CursorCompanion={add:e=>{const n=new e(e);return n.start(),t.push(n),n},remove:e=>{const n=t.indexOf(e);n>-1&&(t[n].stop(),t.splice(n,1))},removeAll:()=>{t.forEach(e=>e.stop()),t.length=0},pauseAll:()=>{t.forEach(e=>e.stop())},resumeAll:()=>{t.forEach(e=>e.start())},list:()=>t.slice()}}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n()}})();
